<!DOCTYPE html> 
<html lang="ar" dir="rtl"> 
<head> 
    <meta charset="UTF-8"> 
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <title>ุญุจุงุฑ | ุฅูุดุงุก ุญุณุงุจ  </title> 
    <link rel="stylesheet" href="create-account-02-style.css"> 
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+Arabic:wght@400;700&display=swap" rel="stylesheet"> 
</head> 







<nav class="navbar"> 
    <div class="nav-container"> 
        <div class="logo"> 
            <a href="index.html" id="adminLink">ุญุจุงุฑ</a> 
        </div>

        <ul class="nav-links"> 
            <li><a href="index.html">ุงูุฑุฆูุณูุฉ</a></li> 
            <li><a href="Request02.html">ุทูุจ ุชุนุงูู</a></li> 
        </ul>

        <div class="auth-buttons">
            <a href="sign-up02.html" class="nav-btn-login">ุชุณุฌูู ุงูุฏุฎูู</a>
            <a href="create-account-02.html" class="nav-btn-signup">ุฅูุดุงุก ุญุณุงุจ</a>
        </div>
        
        <div class="menu-toggle" id="mobile-menu"> 
            <span class="bar"></span> 
            <span class="bar"></span> 
            <span class="bar"></span> 
        </div>
    </div>
</nav>








<body> 
    <div class="main-hero"> 
        <div class="auth-card"> 
            <h1 class="hero-title">ุฃูุดุฆ ุญุณุงุจู</h1> 
            <p class="hero-subtitle">ุงูุถู ุฅูู ูุฌุชูุน ุญุจุงุฑ ุงูุฅุจุฏุงุนู ๐</p> 
            <div class="input-group"> 
                <input type="text" id="regName" placeholder="ุงูุงุณู ุงููุงูู" required> 
                <input type="tel" id="regPhone" placeholder="ุฑูู ุงูุฌูุงู" required> 
            </div>
            <button id="submitBtn" onclick="handleRegister()" class="primary-btn">ุฅูุดุงุก ุงูุญุณุงุจ</button> 
            <p class="switch-auth">ูุฏูู ุญุณุงุจ ุจุงููุนูุ <a href="sign-up02.html">ุณุฌู ุฏุฎููู</a></p> 
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore-compat.js"></script>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyC5LqK5nYvhmgVLB8utjPjLQdNQMy_qe2c",
            authDomain: "comments-test01.firebaseapp.com",
            databaseURL: "https://comments-test01-default-rtdb.firebaseio.com",
            projectId: "comments-test01",
            storageBucket: "comments-test01.firebasestorage.app",
            messagingSenderId: "1061900134848",
            appId: "1:1061900134848:web:a740fa25f3a27a36be0025"
        };

        // ุชููุฆุฉ Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

    window.handleRegister = function() {
    const name = document.getElementById('regName').value.trim();
    const phone = document.getElementById('regPhone').value.trim();
    const btn = document.getElementById('submitBtn');

    if(name === "" || phone === "") {
        alert("ูุฑุฌู ููุก ุงูุงุณู ูุฑูู ุงูุฌูุงู");
        return;
    }

    // ุชุนุทูู ุงูุฒุฑ
    btn.disabled = true;
    btn.innerText = "ุฌุงุฑู ุงูุชุญูู...";

    // 1. ุงูุชุญูู ุฃููุงู ูู ูุฌูุฏ ุงูุงุณู ุฃู ุงูุฑูู
    db.collection("users").where("phone", "==", phone).get()
    .then((phoneCheck) => {
        if (!phoneCheck.empty) {
            alert("ุนุฐุฑุงูุ ุฑูู ุงูุฌูุงู ูุฐุง ูุณุฌู ูุณุจูุงู!");
            btn.disabled = false;
            btn.innerText = "ุฅูุดุงุก ุงูุญุณุงุจ";
            return; // ุชููู ููุง
        }

        // 2. ุฅุฐุง ูุงู ุงูุฑูู ุบูุฑ ููุฌูุฏุ ูุชุญูู ูู ุงูุงุณู
        db.collection("users").where("name", "==", name).get()
        .then((nameCheck) => {
            if (!nameCheck.empty) {
                alert("ูุฐุง ุงูุงุณู ููุฌูุฏ ูุณุจูุงูุ ูุฑุฌู ุงุฎุชูุงุฑ ุงุณู ุขุฎุฑ ุฃู ุฅุถุงูุฉ ููุจ.");
                btn.disabled = false;
                btn.innerText = "ุฅูุดุงุก ุงูุญุณุงุจ";
                return; // ุชููู ููุง
            }

            // 3. ุฅุฐุง ูุฑูุช ุงููุญูุตุงุช ุจูุฌุงุญุ ูููู ุจุงูุฅุถุงูุฉ
            btn.innerText = "ุฌุงุฑู ุงูุญูุธ...";
            db.collection("users").add({
                name: name,
                phone: phone,
                createdAt: firebase.firestore.FieldValue.serverTimestamp()
            })
            .then(() => {
                // ุญูุธ ุงูุงุณู ูู ุงููุชุตูุญ ูุจู ุงูุงูุชูุงู
                localStorage.setItem("userName", name); 
                alert("ุฃููุงู ุจู ูุง " + name + "! ุชู ุฅูุดุงุก ุญุณุงุจู ุจูุฌุงุญ.");
                window.location.href = "index.html"; 
            })
            .catch((error) => {
                alert("ุฎุทุฃ ูู ุงูุญูุธ: " + error.message);
                btn.disabled = false;
                btn.innerText = "ุฅูุดุงุก ุงูุญุณุงุจ";
            });
        });
    })
    .catch((error) => {
        console.error("ุฎุทุฃ ูู ุงูุชุญูู:", error);
        btn.disabled = false;
        btn.innerText = "ุฅูุดุงุก ุงูุญุณุงุจ";
    });
};
    </script>

    <script>
document.addEventListener("DOMContentLoaded", function() {
    const userName = localStorage.getItem("userName");
    const authButtons = document.querySelector(".auth-buttons");

    if (userName && authButtons) {
        // ุฅุฐุง ูุงู ุงูุดุฎุต ูุณุฌู ุฏุฎููุ ุงุณุชุจุฏู ุงูุฃุฒุฑุงุฑ ุจุชุฑุญูุจ ูุฒุฑ ุฎุฑูุฌ
        authButtons.innerHTML = `
            <div style="display: flex; align-items: center; gap: 15px;">
                <span style="color: #042de2; font-weight: bold;"> ${userName}๐ค </span>
                <button onclick="logout()" style="background: none; border: 1px solid #ff4d4d; color: #ff4d4d; padding: 5px 10px; border-radius: 5px; cursor: pointer; font-family: inherit;">ุฎุฑูุฌ</button>
            </div>
        `;
    }
});

// ุฏุงูุฉ ุชุณุฌูู ุงูุฎุฑูุฌ
function logout() {
    localStorage.removeItem("userName"); // ูุณุญ ุงูุงุณู ูู ุงููุชุตูุญ
    location.reload(); // ุฅุนุงุฏุฉ ุชุญููู ุงูุตูุญุฉ ูุชุธูุฑ ุฃุฒุฑุงุฑ ุงูุฏุฎูู ูุฌุฏุฏุงู
}
</script>

<script>
document.addEventListener("DOMContentLoaded", function() {
    const userName = localStorage.getItem("userName");
    const authButtons = document.querySelector(".auth-buttons");
    
    // --- ุงูุฌุฒุก ุงูุฌุฏูุฏ: ุฅุฎูุงุก ุฒุฑ ุงูุฅุฏุงุฑุฉ ุนู ุบูุฑ "ุฌููู" ---
    const navLinks = document.querySelectorAll(".nav-links li");
    navLinks.forEach(li => {
        if (li.textContent.includes("ุงูุฅุฏุงุฑุฉ")) {
            // ุฅุฐุง ูู ููู ููุงู ูุณุชุฎุฏู ูุณุฌูุ ุฃู ูุงู ุงููุณุชุฎุฏู ููุณ "jameel"ุ ุงุฎูู ุงูุฒุฑ
            if (userName !== "jameel") {
                li.style.display = "none";
            }
        }
    });
    // ------------------------------------------------

    if (userName && authButtons) {
        // ุฅุฐุง ูุงู ุงูุดุฎุต ูุณุฌู ุฏุฎููุ ุงุณุชุจุฏู ุงูุฃุฒุฑุงุฑ ุจุชุฑุญูุจ ูุฒุฑ ุฎุฑูุฌ
        authButtons.innerHTML = `
            <div style="display: flex; align-items: center; gap: 15px;">
<a href="customer-profile02.html" style="color: #042de2; font-weight: bold; text-decoration: none; transition: 0.3s; display: inline-flex; align-items: center;" onmouseover="this.style.opacity='0.7'" onmouseout="this.style.opacity='1'">
    ${userName} ๐ค
</a>                <button onclick="logout()" style="background: none; border: 1px solid #ff4d4d; color: #ff4d4d; padding: 5px 10px; border-radius: 5px; cursor: pointer; font-family: inherit;">ุฎุฑูุฌ</button>
            </div>
        `;
    }
});

// ุฏุงูุฉ ุชุณุฌูู ุงูุฎุฑูุฌ
function logout() {
    localStorage.removeItem("userName"); // ูุณุญ ุงูุงุณู ูู ุงููุชุตูุญ
    location.reload(); // ุฅุนุงุฏุฉ ุชุญููู ุงูุตูุญุฉ ูุชุธูุฑ ุฃุฒุฑุงุฑ ุงูุฏุฎูู ูุฌุฏุฏุงู
}









document.addEventListener("DOMContentLoaded", function() {
    const userName = localStorage.getItem("userName");
    
    // ุงุณุชุฎุฏููุง querySelector ูุฌูุจ ุงููุงุฆูุฉ ุนู ุทุฑูู ุงูููุงุณ ุงูููุฌูุฏ ูุนููุงู ูู ููุฏู
    const navLinksList = document.querySelector(".nav-links");

    // ุชุญูู ุฃููู: ุฅุฐุง ูุงู ุงููุณุชุฎุฏู ูู ุฌูููุ ุฃุถู ุฑุงุจุท ููุญุฉ ุงูุชุญูู ูููุงุฆูุฉ
    if (userName === "jameel" && navLinksList) {
        const adminLi = document.createElement("li");
        adminLi.innerHTML = `<a href="control02.html" style="042de2: #ff4d4d; "> ููุญุฉ ุงูุชุญูู</a>`;
        navLinksList.appendChild(adminLi);
    }
});
</script>



</body> 
</html>